; Social dynamics test configuration for SimForager
; Purpose: exercise density dependent social modulation of kappa and velocity

; Dimensions: x y z (assuming grid spacing of 5 microns)
dim =                         5000 5000 1

; Whole ecosystem dimensions: x y z
ecosystem-dim =               5000 5000 1

; Number of timesteps
; Keep moderate so a test run finishes quickly but still shows emergent clustering
timesteps =                   10000

; Initial infections
; Disable infections for this test so that movement changes are due to social dynamics
; rather than infection or chemokine fields.
; infection-coords omitted intentionally

; Substrate bitmap
substrate-bitmap = /carc/scratch/projects/melaniem/melaniem2016345/reef_substrates/SubstrateGenerator/out_spa_459_reps/bmps/spa_459_rep01.bmp

; Floating algae dynamics (left mostly inert for this test)
initial-infection =           0
incubation-period =           0
apoptosis-period =            1000000
expressing-period =           1000000
infectivity =                 0.0
infectivity-multiplier =      1.0
floating_algae-production =   0.0
floating_algae-production-multiplier = 1.0
floating_algae-clearance =    0.0
floating_algae-diffusion =    0.0

; Chemokines off
chemokine-production =        0.0
chemokine-decay =             0.0
chemokine-diffusion =         0.0
min-chemokine =               0.0

; Antibodies irrelevant, keep inert
antibody-factor =             1
antibody-period =             1000000

; Fish population control
; Generate a fixed initial population and do not add more during the run
fish-generation-rate =        0
fish-initial-delay =          0
fish-vascular-period =        2
fish-reef-period =            1000000
fish-binding-period =         2
max-binding-prob =            1

; Fish do not follow gradients in this test
fishs-follow-gradient =       false

; Random seed
seed =                        29

; Sampling
; Frequent sampling so the MP4 shows smooth evolution of kappa and velocity overlays
sample-period =               50
sample-resolution =           1
max-block-dim =               10

; Output directory
output =                      results

; Predators disabled for now
num-fish =                    2000
predator-ratio =              0
predator-detect-grazer-radius = 0
grazer-detect-predator-radius  = 0

; Attached algae parameters (not central here, but harmless to leave)
algae-initial-count =         100.0
algae-decomp-rate-from-grazing = 0.0

; ---------------------------------------------------------------------------
; Baseline per substrate kappa and step length parameters
; These are legacy controls. If your new social code overrides kappa and sets
; velocity as kappa/2, these step length values may be ignored.
; ---------------------------------------------------------------------------

; kappa with predator (unused)
kappa_grazer_w_predator_coral_w_algae =                      0
kappa_grazer_w_predator_coral_no_algae =                     0
kappa_grazer_w_predator_sand_w_algae =                       0
kappa_grazer_w_predator_sand_no_algae =                      0

; baseline scaredy values (used as defaults in older logic)
kappa_grazer_wo_predator_coral_w_algae =                     2
kappa_grazer_wo_predator_coral_no_algae =                    8
kappa_grazer_wo_predator_sand_w_algae =                      64
kappa_grazer_wo_predator_sand_no_algae =                     128

; baseline step length values (legacy)
step_length_grazer_wo_predator_coral_w_algae =               1
step_length_grazer_wo_predator_coral_no_algae =              2
step_length_grazer_wo_predator_sand_w_algae =                32
step_length_grazer_wo_predator_sand_no_algae =               64

; ---------------------------------------------------------------------------
; Social dynamics parameters
; These should drive density dependent modulation of kappa and velocity.
; Velocity should be set as kappa/2 in code, so only kappa ranges matter here.
; ---------------------------------------------------------------------------

social-density-radius = 50
kappa-social-min = 8
kappa-social-max = 64
social-sigmoid-midpoint = 0.5
social-sigmoid-steepness = 10

kappa-social-min =            8.0
kappa-social-max =            64.0
